jQuery(document).ready(function(){var x="page_archive_work";var u=window.location.protocol+"//"+window.location.host+"/wp-admin/admin-ajax.php";var m=jQuery("#content_wrapper :visible").attr("id");var t=document.referrer||document.location.href;var l=false;var n=false;var B=false;var A="all";var s=(typeof _paq==="undefined")?false:true;String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(C){return C.toUpperCase()})};function b(){m=jQuery("#content_wrapper :visible").attr("id");y=false}function r(){l=true;jQuery("#loading_animation").stop().show().animate({opacity:".85"},750)}function k(){jQuery("#loading_animation").stop().animate({opacity:"0"},1000,function(){jQuery("#loading_animation").hide();l=false})}function a(){jQuery("div.highlight_slides").each(function(){var D=jQuery(this);var C=D.children().length;if(C>1){D.children().css("cursor","pointer")}})}function o(C,E,D){console.log("function displayPage");console.log("pageDiv: "+C);console.log("pageUrl: "+E);console.log("pageContent: "+D);jQuery("#"+m).stop().animate({opacity:"0"},750,function(){jQuery("#"+m).hide(function(){if(D){jQuery("#content_wrapper").css("opacity","0");jQuery("#content_wrapper").append(D);jQuery("#content_wrapper").animate({opacity:"1"},750);a()}else{jQuery("#"+C).show().animate({opacity:"1"},750)}var F=jQuery("#"+C).data("pageTitle");w(C);z(F);if(E){d(E)}b();k()})})}function i(F,J,D){var I=jQuery("div#"+F+" .highlight_slides div[data-slide="+D+"]");var E=jQuery("div#"+F+" .highlight_slides div[data-slide="+J+"]");I.stop().css("z-index","10").stop().show().animate({opacity:"1"},250,function(){E.stop().animate({opacity:"0"},250,function(){E.hide();I.css("z-index","5");c(F,D);n=false})});var H=jQuery("#"+F+" .numbers_wrapper .numbers");var C=H.children("[data-slide="+D+"]").children("img.off");var G=H.children("[data-slide="+J+"]").children("img.off");G.stop().show().animate({opacity:"1"},300);C.stop().animate({opacity:"0"},300,function(){C.hide()})}function q(C){return !$.trim(C.html())}function h(G,F){console.log("function loadPage");console.log("pageUrl: "+G);console.log("pagePath: "+F);if(l){return}F=F||G;var E=v(F,"divId");console.log("pageDiv: "+E);if(E===m){return}var D=v(F,"array");var H=D[0];var C=D[1];console.log("postType: "+H);console.log("postID: "+C);r();console.log("here");if(q(jQuery("#"+E))){jQuery.ajax({type:"POST",url:u,data:{action:"getAjaxData",postType:H,postID:C,token:window.nonce},success:function(I){console.log("sent request");o(E,G,I)},error:function(I){console.log("error ajax");if(I.status===403){o("page_error_403",false,I.responseText)}else{k()}}})}else{console.log("show cached page");o(E,G)}}function p(D,C){if(!s){return}D=D||document.location.href;C=C||window.document.title;_paq.push(["setCustomUrl",D]);_paq.push(["setDocumentTitle",C]);_paq.push(["setReferrerUrl",t]);_paq.push(["trackPageView"])}function c(C,D){if(!s){return}C=jQuery("#"+C).data("pageTitle");D="Slide "+D;_paq.push(["trackEvent","Slides",C,D])}function w(D){var C=D.split("_");if(C[1]==="category"){window.categoryId=C[2];window.categoryName=C[1]}else{window.categoryName=C[1]}}function z(C){var D=" â€º ";title=siteName;if(window.categoryName.length>0){if(window.categoryName==="post"){window.categoryName="blog"}if(C.toLowerCase()!==window.categoryName.toLowerCase()){title+=D+window.categoryName.capitalize()}}title+=D+C;window.document.title=title}function d(C){t=document.location.href;C=v(C,"path");history.pushState(null,null,C);p()}function v(F,C){var H=document.createElement("a");H.href=F;F=H.pathname;F=F.split(/[\\/]/);F=jQuery.grep(F,function(I){return(I)});if(C==="divId"){var D="";var E=0;var G="";F.forEach(function(I){if(E===0){firstIndex=I}if(E>0){G="_"}D+=G+I;++E});if(E>1){if(firstIndex==="category"){D="page_"+D}else{D="page_single_"+D}}else{D="page_archive_"+D}return D}else{if(C==="array"){if(typeof F[1]==="undefined"){}return F}else{if(C==="path"){F=H.pathname;return F}}}}jQuery("html").animate({opacity:"1"},500,function(){jQuery("#content_wrapper").delay(750).animate({opacity:"1"},1000)});window.onload=function(){jQuery("#navigation_wrapper").animate({opacity:"1"},1000);k()};a();window.addEventListener("popstate",function(){var C=document.location.pathname;h(C)});jQuery("nav img.off").hover(function(){jQuery(this).stop().animate({opacity:"0"},250)},function(){jQuery(this).stop().animate({opacity:"1"},250)});jQuery(document).on("click","a",function(E){function C(){E.preventDefault();E.stopPropagation()}var K;var L=jQuery(this);var D=L.data("linkType");var G=L.attr("href");if(D==="headerNavigation"){C();var I=L.data("postType");K="/"+I+"/";h(G,K)}else{if(D==="workNavigation"){C();var J=L.data("projectType");if(!B&&J!==A){B=true;$("#page_archive_work .row").fadeOut(1000,function(){$("#page_archive_work .column").hide();$('#page_archive_work .column[data-project-type~="'+J+'"]').show();$("#page_archive_work .row").fadeIn(1000,function(){A=J;B=false})})}}else{if(D==="postNavigation"){var F=L.data("postId");var H=L.data("categoryId");var I=L.data("postType");C();var M=F||H;K="/"+I+"/"+M;h(G,K)}}}});jQuery(document).on("click","#content_wrapper div .numbers_wrapper .numbers div",function(){var E=jQuery(this);var D=E.parent().parent().parent().attr("id");var C=E.data("slide");var F=jQuery("#"+D+" .highlight_slides > div:visible").data("slide");if(F!==C&&!n){n=true;i(D,F,C)}});jQuery(document).on("click","#content_wrapper div .highlight_slides div img.highlight",function(){var C=jQuery(this).parent();var F=C.parent().parent().attr("id");var H=C.data("slide");var E=C.parent().children().length;if(E>1&&!n){n=true;var G=C.next("div");var D;if(G.length===0){G=C.prevAll("div").last();D=G.data("slide")}else{D=G.data("slide")}i(F,H,D)}});var g,f,y,j,e;g=window.categoryId;jQuery(window).scroll(function(){j=jQuery(document).height()-jQuery(window).height();e=jQuery(window).scrollTop()+200;if(e>=j&&!y&&!l){if(jQuery("#page_category_"+g).is(":visible")){r();f=jQuery("#page_category_"+g+" > article").length;jQuery.ajax({type:"POST",url:u,data:{action:"getAjaxData",category:g,offset:f,token:window.nonce},success:function(C){if(C===""){y=true}else{jQuery("#page_category_"+g+":last-child").append(C)}},error:function(C){if(C.status===403){o("page_error_403",false,C.responseText)}},complete:function(){k()}})}else{if(jQuery("#page_blog").is(":visible")){r();f=jQuery("#page_blog > article").length;jQuery.ajax({type:"POST",url:u,data:{action:"getAjaxData",category:"",offset:f,token:window.nonce},success:function(C){if(C===""){y=true}else{jQuery("#page_blog:last-child").append(C)}},error:function(C){if(C.status===403){o("page_error_403",false,C.responseText)}},complete:function(){k()}})}}}})});