jQuery(document).ready(function(){var z="page_archive_work";var w=window.location.protocol+"//"+window.location.host+"/wp-admin/admin-ajax.php";var o=jQuery("#content_wrapper :visible").attr("id");var v=document.referrer||document.location.href;var m=false;var p=false;var D=false;var C="all";var u=(typeof _paq==="undefined")?false:true;var d=window.history.state;function k(){console.log("initiateState()");if(!I){var J=document.location.href;var H=window.document.title;var E=jQuery("#"+o).data("viewType");var K=jQuery("#"+o).data("postType");var F=jQuery("#"+o).data("postId");var G={pageUrl:J,viewType:E,postType:K,postId:F};console.log("Detected MISSING state");console.log("replaceState({pageUrl: "+J+", viewType: "+E+", postType: "+K+", postId: "+F+"},"+H+","+J+")");history.replaceState(G,H,J);console.log("New state");var I=window.history.state;console.log(I)}else{console.log("Detected SET state");console.log(I)}}String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(E){return E.toUpperCase()})};function b(){o=jQuery("#content_wrapper :visible").attr("id");console.log("updateVisiblePage("+o+")");A=false}function t(){console.log("showLoadingAnimation()");m=true;jQuery("#loading_animation").stop().show().animate({opacity:"1"},500)}function l(){console.log("hideLoadingAnimation()");jQuery("html").animate({scrollTop:0},1,function(){jQuery("#loading_animation").stop().animate({opacity:"0"},500,function(){jQuery("#loading_animation").hide();m=false;b()})})}function a(){jQuery("div.highlight_slides").each(function(){var F=jQuery(this);var E=F.children().length;if(E>1){F.children().css("cursor","pointer")}})}function i(H,L,F){var K=jQuery("div#"+H+" .highlight_slides div[data-slide="+F+"]");var G=jQuery("div#"+H+" .highlight_slides div[data-slide="+L+"]");K.stop().css("z-index","10").stop().show().animate({opacity:"1"},250,function(){G.stop().animate({opacity:"0"},250,function(){G.hide();K.css("z-index","5");c(H,F);p=false})});var J=jQuery("#"+H+" .numbers_wrapper .numbers");var E=J.children("[data-slide="+F+"]").children("img.off");var I=J.children("[data-slide="+L+"]").children("img.off");I.stop().show().animate({opacity:"1"},300);E.stop().animate({opacity:"0"},300,function(){E.hide()})}function s(E){return !$.trim(E.html())}function h(I,E,K,F,J){if(J===undefined){J=true}console.log("function loadPage("+I+","+E+","+K+","+F+","+J+")");if(m){return}var G=x(K,F);if(G===o){return}console.log("function ajax({action: getAjaxData, viewType: "+E+", postType: "+K+", postId: "+F+", token: "+window.nonce+" })");t();if(s(jQuery("#"+G))){jQuery.ajax({type:"POST",url:w,data:{action:"getAjaxData",viewType:E,postType:K,postId:F,token:window.nonce},success:function(L){q(G,I,L)},error:function(L){console.log("AJAX error");if(L.status===403){q("page_error_403",false,L.responseText)}else{console.log(L.responseText);console.log(L.status);l()}}})}else{console.log("Detected cached content");q(G,I)}if(J){var H=jQuery("#"+G).data("pageTitle");n({pageUrl:I,viewType:E,postType:K,postId:F},H,I)}}function q(E,G,F){console.log("function displayPage("+E+","+G+", pageContent)");console.log("visiblePage: "+o);jQuery("#"+o).stop().animate({opacity:"0"},750,function(){jQuery("#"+o).hide(function(){if(F){jQuery("#content_wrapper").css("opacity","0");jQuery("#content_wrapper").append(F).imagesLoaded().then(function(){console.log("------ IMAGES LOADED ------");jQuery("#content_wrapper").animate({opacity:"1"},1000);l()});a()}else{jQuery("#"+E).show().animate({opacity:"1"},1000);l()}y(E);var H=jQuery("#"+E).data("pageTitle");B(H);H=window.document.title;r(G,H)})})}function r(F,E){console.log("trackPage("+F+","+E+")");if(!u){console.log("Tracking Disabled");return}console.log("Tracking Enabled");F=F||document.location.href;E=E||window.document.title;_paq.push(["setCustomUrl",F]);_paq.push(["setDocumentTitle",E]);_paq.push(["setReferrerUrl",v]);_paq.push(["trackPageView"])}function c(E,F){console.log("trackAction("+E+","+F+")");if(!u){console.log("Tracking Disabled");return}E=jQuery("#"+E).data("pageTitle");F="Slide "+F;_paq.push(["trackEvent","Slides",E,F])}function y(E){console.log("updateCategory("+E+")");var G=jQuery("#"+E).data("postType");var F=jQuery("#"+E).data("categoryId");console.log("postType("+G+")");console.log("categoryId("+F+")");if(G==="category"){window.categoryName=G;window.categoryId=F;console.log("New categoryName: "+window.categoryName)}else{window.categoryName=G;console.log("New categoryName: "+window.categoryName)}}function B(E){console.log("updateTitle("+E+")");var F=" â€º ";var G=siteTitle;if(typeof myVar!=="undefined"){if(typeof window.categoryName!=="undefined"&&window.categoryName.length>0){if(window.categoryName==="post"){window.categoryName="blog"}if(E!==window.categoryName){E=E.capitalize();G+=F+window.categoryName.capitalize()}}}E=E.capitalize();G+=F+E;window.document.title=G}function n(E,F,G){console.log("updateBrowserHistory("+E+","+F+","+G+")");pageStateConsole=JSON.stringify(E,null,4);console.log(pageStateConsole);v=document.location.href;history.pushState(E,F,G)}function x(I,F){var E=I;var G=0;var H="";if(F){E=E+"_"+F;if(I==="category"){E="page_"+E}else{E="page_single_"+E}}else{E="page_archive_"+E}return E}$.fn.imagesLoaded=function(){console.log("------ IMAGES LOADING ------");var F=this.find('img[src!=""]');if(!F.length){return $.Deferred().resolve().promise()}var E=[];F.each(function(){var G=$.Deferred();E.push(G);var H=new Image();H.onload=function(){G.resolve()};H.onerror=function(){G.resolve()};H.src=this.src});return $.when.apply($,E)};window.onload=function(){jQuery("html").animate({opacity:"1"},1,function(){jQuery("#content_wrapper").imagesLoaded().then(function(){console.log("------ IMAGES LOADED ------");jQuery("#content_wrapper").animate({opacity:"1"},750);l()})});k()};a();window.addEventListener("popstate",function(G){var I=window.history.state;G.preventDefault();G.stopPropagation();if(!I){console.log("No history state..");console.log(I)}else{if(I){console.log("Detected history state..");console.log(I);console.log("Event:");console.log(G);var H=I.pageUrl;var E=I.viewType;var K=I.postType;var F=I.postId;var J=false;h(H,E,K,F,J)}}});jQuery("nav img.off").hover(function(){console.log("hover");jQuery(this).stop().animate({opacity:"0"},250)},function(){jQuery(this).stop().animate({opacity:"1"},250)});jQuery("nav a").focusin(function(){jQuery(this).children("img.off").stop().animate({opacity:"0"},250)});jQuery("nav a").focusout(function(){jQuery(this).children("img.off").stop().animate({opacity:"1"},250)});jQuery(document).on("click","a",function(G){function E(){G.preventDefault();G.stopPropagation()}var N=jQuery(this);var F=N.data("linkType");var I=N.attr("href");console.log("Anchor clicked: "+I);if(F==="headerNavigation"){E();var K=N.data("postType");var L=N.data("viewType");h(I,L,K)}else{if(F==="workNavigation"){E();var M=N.data("projectType");if(!D&&M!==C){D=true;$("#page_archive_work .row").fadeOut(1000,function(){$("#page_archive_work .column").hide();$('#page_archive_work .column[data-project-type~="'+M+'"]').show();$("#page_archive_work .row").fadeIn(1000,function(){C=M;D=false;M=M.capitalize();_paq.push(["trackEvent","Types","Work",M])})})}}else{if(F==="postNavigation"){E();var L=N.data("viewType");var K=N.data("postType");var H=N.data("postId");var J=N.data("categoryId");var O=H||J;h(I,L,K,O)}}}});jQuery(document).on("click","#content_wrapper div .numbers_wrapper .numbers div",function(){var G=jQuery(this);var F=G.parent().parent().parent().attr("id");var E=G.data("slide");var H=jQuery("#"+F+" .highlight_slides > div:visible").data("slide");if(H!==E&&!p){p=true;i(F,H,E)}});jQuery(document).on("click","#content_wrapper div .highlight_slides div img.highlight",function(){var E=jQuery(this).parent();var H=E.parent().parent().attr("id");var J=E.data("slide");var G=E.parent().children().length;if(G>1&&!p){p=true;var I=E.next("div");var F;if(I.length===0){I=E.prevAll("div").last();F=I.data("slide")}else{F=I.data("slide")}i(H,J,F)}});var g,f,A,j,e;g=window.categoryId;jQuery(window).scroll(function(){j=jQuery(document).height()-jQuery(window).height();e=jQuery(window).scrollTop()+200;if(e>=j&&!A&&!m){if(jQuery("#page_category_"+g).is(":visible")){t();f=jQuery("#page_category_"+g+" > article").length;jQuery.ajax({type:"POST",url:w,data:{action:"getAjaxData",category:g,offset:f,token:window.nonce},success:function(E){if(E===""){A=true}else{jQuery("#page_category_"+g+":last-child").append(E)}},error:function(E){if(E.status===403){q("page_error_403",false,E.responseText)}},complete:function(){l()}})}else{if(jQuery("#page_blog").is(":visible")){t();f=jQuery("#page_blog > article").length;jQuery.ajax({type:"POST",url:w,data:{action:"getAjaxData",category:"",offset:f,token:window.nonce},success:function(E){if(E===""){A=true}else{jQuery("#page_blog:last-child").append(E)}},error:function(E){if(E.status===403){q("page_error_403",false,E.responseText)}},complete:function(){l()}})}}}})});