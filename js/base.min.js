jQuery(document).ready(function(){var y="page_archive_work";var u=window.location.protocol+"//"+window.location.host+"/wp-admin/admin-ajax.php";var m=jQuery("#content_wrapper :visible").attr("id");var t=document.referrer||document.location.href;var l=false;var n=false;var C=false;var B="all";var s=(typeof _paq==="undefined")?false:true;String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(D){return D.toUpperCase()})};function b(){m=jQuery("#content_wrapper :visible").attr("id");z=false}function r(){l=true;jQuery("#loading_animation").stop().show().animate({opacity:".85"},750)}function k(){jQuery("html, body").animate({scrollTop:0},"slow",function(){jQuery("#loading_animation").stop().animate({opacity:"0"},1000,function(){jQuery("#loading_animation").hide();l=false})})}function a(){jQuery("div.highlight_slides").each(function(){var E=jQuery(this);var D=E.children().length;if(D>1){E.children().css("cursor","pointer")}})}function i(G,K,E){var J=jQuery("div#"+G+" .highlight_slides div[data-slide="+E+"]");var F=jQuery("div#"+G+" .highlight_slides div[data-slide="+K+"]");J.stop().css("z-index","10").stop().show().animate({opacity:"1"},250,function(){F.stop().animate({opacity:"0"},250,function(){F.hide();J.css("z-index","5");c(G,E);n=false})});var I=jQuery("#"+G+" .numbers_wrapper .numbers");var D=I.children("[data-slide="+E+"]").children("img.off");var H=I.children("[data-slide="+K+"]").children("img.off");H.stop().show().animate({opacity:"1"},300);D.stop().animate({opacity:"0"},300,function(){D.hide()})}function q(D){return !$.trim(D.html())}function h(G,H,D){console.log("function loadPage(pageUrl, postType, postId)");console.log("pageUrl: "+G);console.log("postType: "+H);console.log("postId: "+D);if(l){return}console.log("function AJAXorCache(pageDiv, postType, postId)");var E=v(H,D,"divId");console.log("pageDiv: "+E);if(E===m){return}console.log("postType: "+H);console.log("postId: "+D);r();if(q(jQuery("#"+E))){jQuery.ajax({type:"POST",url:u,data:{action:"getAjaxData",postType:H,postId:D,token:window.nonce},success:function(I){console.log("AJAX success");o(E,G,I)},error:function(I){console.log("AJAX error");if(I.status===403){o("page_error_403",false,I.responseText)}else{k()}}})}else{console.log("CACHED success");o(E,G);console.log("function history.pushState(pageDiv, pageTitle, pageUrl)");console.log("pageDiv: "+E);var F=jQuery("#"+E).data("pageTitle");console.log("pageTitle: "+F);console.log("pageUrl: "+G);history.pushState(E,F,G)}}function o(D,G,E,F){console.log("function displayPage(pageDiv, pageUrl, pageContent, pageHistory)");console.log("pageDiv: "+D);console.log("pageUrl: "+G);console.log("pageContent: ... ");if(F===undefined){console.log("pageHistory: undefined / true");F=true}else{console.log("pageHistory: "+F)}console.log("pageHistory: "+F);jQuery("#"+m).stop().animate({opacity:"0"},750,function(){jQuery("#"+m).hide(function(){if(E){jQuery("#content_wrapper").css("opacity","0");jQuery("#content_wrapper").append(E);jQuery("#content_wrapper").animate({opacity:"1"},750);a()}else{jQuery("#"+D).show().animate({opacity:"1"},750)}var H=jQuery("#"+D).data("pageTitle");x(D);console.log("pageTitle: "+H);A(H);if(G){t=document.location.href;p()}if(F){console.log("function history.pushState(pageDiv, pageTitle, pageUrl)");console.log("pageDiv: "+D);var H=jQuery("#"+D).data("pageTitle");console.log("pageTitle: "+H);console.log("pageUrl: "+G);history.pushState(D,H,G)}b();k()})})}function p(E,D){if(!s){return}E=E||document.location.href;D=D||window.document.title;_paq.push(["setCustomUrl",E]);_paq.push(["setDocumentTitle",D]);_paq.push(["setReferrerUrl",t]);_paq.push(["trackPageView"])}function c(D,E){if(!s){return}D=jQuery("#"+D).data("pageTitle");E="Slide "+E;_paq.push(["trackEvent","Slides",D,E])}function x(E){var D=E.split("_");if(D[1]==="category"){window.categoryId=D[2];window.categoryName=D[1]}else{window.categoryName=D[1]}}function A(D){var E=" â€º ";var F=siteTitle;if(window.categoryName.length>0){if(window.categoryName==="post"){window.categoryName="blog"}if(D.toLowerCase()!==window.categoryName.toLowerCase()){F+=E+window.categoryName.capitalize()}}F+=E+D;window.document.title=F}function d(D){t=document.location.href;D=w(D,"path");history.pushState(null,null,D);p()}function v(I,F,D){if(D==="divId"){var E=I;var G=0;var H="";if(F){E=E+"_"+F;if(I==="category"){E="page_"+E}else{E="page_single_"+E}}else{E="page_archive_"+E}return E}}function w(G,D){var I=document.createElement("a");I.href=G;G=I.pathname;G=G.split(/[\\/]/);G=jQuery.grep(G,function(J){return(J)});if(D==="divId"){var E="";var F=0;var H="";G.forEach(function(J){if(F===0){firstIndex=J}if(F>0){H="_"}E+=H+J;++F});if(F>1){if(firstIndex==="category"){E="page_"+E}else{E="page_single_"+E}}else{E="page_archive_"+E}return E}else{if(D==="array"){if(typeof G[1]==="undefined"){}return G}else{if(D==="path"){G=I.pathname;return G}}}}jQuery("html").animate({opacity:"1"},500,function(){jQuery("#content_wrapper").delay(750).animate({opacity:"1"},1000)});window.onload=function(){jQuery("#navigation_wrapper").animate({opacity:"1"},1000);pageDiv=m;var D=jQuery("#"+pageDiv).data("pageTitle");pageUrl=document.location.pathname;console.log("Added first history for: "+pageDiv);console.log("function history.replaceState(pageDiv, pageTitle, pageUrl)");console.log("pageDiv: "+pageDiv);console.log("pageTitle: "+D);console.log("pageUrl: "+pageUrl);history.replaceState(pageDiv,D,pageUrl);k()};a();window.addEventListener("popstate",function(F){console.log("listener popstate");var H=document.location.pathname;var D=F.state;var E=null;var G=false;console.log("pageUrl: "+H);console.log("pageDiv: "+D);if(D!=null){o(D,H,E,G)}});jQuery("nav img.off").hover(function(){console.log("hover");jQuery(this).stop().animate({opacity:"0"},250)},function(){jQuery(this).stop().animate({opacity:"1"},250)});jQuery("nav a").focusin(function(){jQuery(this).children("img.off").stop().animate({opacity:"0"},250)});jQuery("nav a").focusout(function(){jQuery(this).children("img.off").stop().animate({opacity:"1"},250)});jQuery(document).on("click","a",function(F){function D(){F.preventDefault();F.stopPropagation()}var L=jQuery(this);var E=L.data("linkType");var H=L.attr("href");console.log("link detected: "+H);if(E==="headerNavigation"){D();var J=L.data("postType");h(H,J)}else{if(E==="workNavigation"){D();var K=L.data("projectType");if(!C&&K!==B){C=true;$("#page_archive_work .row").fadeOut(1000,function(){$("#page_archive_work .column").hide();$('#page_archive_work .column[data-project-type~="'+K+'"]').show();$("#page_archive_work .row").fadeIn(1000,function(){B=K;C=false})})}}else{if(E==="postNavigation"){var G=L.data("postId");var I=L.data("categoryId");var J=L.data("postType");D();var M=G||I;h(H,J,M)}}}});jQuery(document).on("click","#content_wrapper div .numbers_wrapper .numbers div",function(){var F=jQuery(this);var E=F.parent().parent().parent().attr("id");var D=F.data("slide");var G=jQuery("#"+E+" .highlight_slides > div:visible").data("slide");if(G!==D&&!n){n=true;i(E,G,D)}});jQuery(document).on("click","#content_wrapper div .highlight_slides div img.highlight",function(){var D=jQuery(this).parent();var G=D.parent().parent().attr("id");var I=D.data("slide");var F=D.parent().children().length;if(F>1&&!n){n=true;var H=D.next("div");var E;if(H.length===0){H=D.prevAll("div").last();E=H.data("slide")}else{E=H.data("slide")}i(G,I,E)}});var g,f,z,j,e;g=window.categoryId;jQuery(window).scroll(function(){j=jQuery(document).height()-jQuery(window).height();e=jQuery(window).scrollTop()+200;if(e>=j&&!z&&!l){if(jQuery("#page_category_"+g).is(":visible")){r();f=jQuery("#page_category_"+g+" > article").length;jQuery.ajax({type:"POST",url:u,data:{action:"getAjaxData",category:g,offset:f,token:window.nonce},success:function(D){if(D===""){z=true}else{jQuery("#page_category_"+g+":last-child").append(D)}},error:function(D){if(D.status===403){o("page_error_403",false,D.responseText)}},complete:function(){k()}})}else{if(jQuery("#page_blog").is(":visible")){r();f=jQuery("#page_blog > article").length;jQuery.ajax({type:"POST",url:u,data:{action:"getAjaxData",category:"",offset:f,token:window.nonce},success:function(D){if(D===""){z=true}else{jQuery("#page_blog:last-child").append(D)}},error:function(D){if(D.status===403){o("page_error_403",false,D.responseText)}},complete:function(){k()}})}}}})});