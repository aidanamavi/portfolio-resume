jQuery(document).ready(function(){var B="page_archive_work";var x=window.location.protocol+"//"+window.location.host+"/wp-admin/admin-ajax.php";var p=jQuery("#content_wrapper :visible").attr("id");var w=document.referrer||document.location.href;var n=false;var q=false;var F=false;var E="all";var v=(typeof _paq==="undefined")?false:true;var d=window.history.state;function l(){console.log("initiateState()");if(!K){var L=document.location.href;var J=window.document.title;var G=jQuery("#"+p).data("viewType");var M=jQuery("#"+p).data("postType");var H=jQuery("#"+p).data("postId");var I={pageUrl:L,viewType:G,postType:M,postId:H};console.log("Detected missing state");console.log("replaceState({pageUrl: "+L+", viewType: "+G+", postType: "+M+", postId: "+H+"},"+J+","+L+")");history.replaceState(I,J,L);console.log("New state");var K=window.history.state;console.log(K)}else{console.log("Detected set state");console.log(K)}}String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(G){return G.toUpperCase()})};function b(){p=jQuery("#content_wrapper :visible").attr("id");console.log("updateVisiblePage("+p+")");C=false}function u(){console.log("showLoadingAnimation()");if(n){console.log("isLoading: wants showing");return}n=true;jQuery("#loading_animation").stop().show().animate({opacity:"1"},500,function(){jQuery("html").animate({scrollTop:0},1)})}function m(){console.log("hideLoadingAnimation()");jQuery("#loading_animation").stop().animate({opacity:"0"},500,function(){jQuery("#loading_animation").hide();n=false;b();h()})}function a(){jQuery("div.highlight_slides").each(function(){var H=jQuery(this);var G=H.children().length;if(G>1){H.children().css("cursor","pointer")}})}function j(J,N,H){var M=jQuery("div#"+J+" .highlight_slides div[data-slide="+H+"]");var I=jQuery("div#"+J+" .highlight_slides div[data-slide="+N+"]");M.stop().css("z-index","10").stop().show().animate({opacity:"1"},250,function(){I.stop().animate({opacity:"0"},250,function(){I.hide();M.css("z-index","5");c(J,H);q=false})});var L=jQuery("#"+J+" .numbers_wrapper .numbers");var G=L.children("[data-slide="+H+"]").children("img.off");var K=L.children("[data-slide="+N+"]").children("img.off");K.stop().show().animate({opacity:"1"},300);G.stop().animate({opacity:"0"},300,function(){G.hide()})}function t(G){return !$.trim(G.html())}function i(K,G,M,H,L){if(L===undefined){L=true}console.log("function loadPage("+K+","+G+","+M+","+H+","+L+")");if(n){return}var I=y(G,M,H);if(I===p){return}console.log("function ajax({action: getAjaxData, viewType: "+G+", postType: "+M+", postId: "+H+", token: "+window.nonce+" })");u();if(t(jQuery("#"+I))){jQuery.ajax({type:"POST",url:x,data:{action:"getAjaxData",viewType:G,postType:M,postId:H,token:window.nonce},success:function(N){r(I,K,N)},error:function(N){console.log("AJAX error");if(N.status===403){r("page_error_403",false,N.responseText)}else{console.log(N.responseText);console.log(N.status);m()}}})}else{console.log("Detected cached content");r(I,K)}if(L){var J=jQuery("#"+I).data("pageTitle");o({pageUrl:K,viewType:G,postType:M,postId:H},J,K)}}function h(){postType=jQuery("#"+p).data("postType");if(postType==="work"||postType==="about"){var M=$(window).height();var H=34;var L=jQuery(".slide:visible img.highlight").height();var J=jQuery(".slide:visible .highlight_text").height();var K=jQuery(".slide:visible").height();var G=L+J;console.log("windowHeight: "+M);console.log("numbersWrapperHeight: "+H);console.log("slideHeightImg: "+L);console.log("slideHeightText: "+J);console.log("slideHeight: "+K);console.log("slideHeight2: "+G);var I=H+G;console.log("cssHeight: "+I);jQuery("#"+p).css("height",I)}}$(window).on("scroll resize",h);function r(G,I,H){console.log("function displayPage("+G+","+I+", pageContent)");console.log("Hiding visiblePage: "+p);jQuery("#"+p).stop().animate({opacity:"0"},750,function(){jQuery("#"+p).hide(function(){if(H){jQuery("#content_wrapper").css("opacity","0");jQuery("#content_wrapper").append(H).imagesLoaded().then(function(){console.log("------ IMAGES LOADED ------");jQuery("#content_wrapper").animate({opacity:"1"},1000);m()});a()}else{jQuery("#"+G).show().animate({opacity:"1"},1000);m()}A(G);D(G);pageTitle=window.document.title;s(I,pageTitle)})})}function s(H,G){console.log("trackPage("+H+","+G+")");if(!v){console.log("Tracking Disabled");return}console.log("Tracking Enabled");H=H||document.location.href;G=G||window.document.title;_paq.push(["setCustomUrl",H]);_paq.push(["setDocumentTitle",G]);_paq.push(["setReferrerUrl",w]);_paq.push(["trackPageView"])}function c(G,H){console.log("trackAction("+G+","+H+")");if(!v){console.log("Tracking Disabled");return}G=jQuery("#"+G).data("pageTitle");H="Slide "+H;_paq.push(["trackEvent","Slides",G,H])}function A(G){console.log("updateCategory("+G+")");var I=jQuery("#"+G).data("postType");var H=jQuery("#"+G).data("categoryId");console.log("postType("+I+")");console.log("categoryId("+H+")");if(I==="category"){window.categoryName=I;window.categoryId=H;console.log("New categoryName: "+window.categoryName)}else{window.categoryName=I;console.log("New categoryName: "+window.categoryName)}}function D(G){var H=jQuery("#"+G).data("pageTitle");window.document.title=H.capitalize()}function z(H){console.log("updateTitle("+H+")");var I=jQuery("#"+H).data("pageTitle");var G=jQuery("#"+H).data("viewType");var L=jQuery("#"+H).data("postType");var J=" â€º ";var K;if(G==="category"){K=siteTitle+J+L+J+G+J+I}else{if(G==="archive"){K=siteTitle+J+L+J+G}else{if(G==="single"){K=siteTitle+J+L+J+I}}}window.document.title=K.capitalize()}function o(G,H,I){console.log("updateBrowserHistory("+G+","+H+","+I+")");pageStateConsole=JSON.stringify(G,null,4);console.log(pageStateConsole);w=document.location.href;history.pushState(G,H,I)}function y(G,J,I){console.log("getPageDiv("+G+","+J+","+I+")");var H="page";if(G&&J){H=H+"_"+G;if(G!=="category"){H=H+"_"+J}if(I){H=H+"_"+I}}return H}$.fn.imagesLoaded=function(){console.log("------ IMAGES LOADING ------");var H=this.find('img[src!=""]');if(!H.length){return $.Deferred().resolve().promise()}var G=[];H.each(function(){var I=$.Deferred();G.push(I);var J=new Image();J.onload=function(){I.resolve()};J.onerror=function(){I.resolve()};J.src=this.src});return $.when.apply($,G)};window.onload=function(){jQuery("html").animate({opacity:"1"},1,function(){jQuery("#content_wrapper").imagesLoaded().then(function(){console.log("------ IMAGES LOADED ------");jQuery("#content_wrapper").animate({opacity:"1"},750);m()})});l();postType=jQuery("#"+p).data("postType");jQuery("#navigation_wrapper a.underline[data-post-type="+postType+"]").addClass("on")};a();window.addEventListener("popstate",function(I){if(n){console.log("HALTED back history");return}var K=window.history.state;I.preventDefault();I.stopPropagation();if(!K){console.log("No history state..");console.log(K)}else{if(K){console.log("Detected history state..");console.log(K);console.log("Event:");console.log(I);var J=K.pageUrl;var G=K.viewType;var M=K.postType;var H=K.postId;var L=false;i(J,G,M,H,L)}}});jQuery("nav img.off").hover(function(){console.log("hover");jQuery(this).stop().animate({opacity:"0"},250)},function(){jQuery(this).stop().animate({opacity:"1"},250)});jQuery("nav a").focusin(function(){jQuery(this).children("img.off").stop().animate({opacity:"0"},250)});jQuery("nav a").focusout(function(){jQuery(this).children("img.off").stop().animate({opacity:"1"},250)});jQuery(document).on("click","a",function(J){function G(){J.preventDefault();J.stopPropagation()}function H(S){jQuery("a.underline.on[data-link-type="+S+"]").removeClass("on");Q.addClass("on")}var Q=jQuery(this);var I=Q.data("linkType");var L=Q.attr("href");console.log("Anchor clicked: "+L);H(I);if(I==="headerNavigation"){G();var N=Q.data("postType");var O=Q.data("viewType");i(L,O,N)}else{if(I==="workNavigation"){G();var P=Q.data("projectType");if(!F&&P!==E){F=true;animateIn=showcaseAnimationIn;animateOut=showcaseAnimationOut;if(!animateIn||!animateOut){animateIn="animate__fadeIn";animateOut="animate__fadeOut"}$("#page_archive_work .column").addClass("animate__animated "+animateOut);$("#page_archive_work .row").fadeOut(1000,function(){$("#page_archive_work .column").hide().removeClass("animate__animated "+animateOut);$('#page_archive_work .column[data-project-type~="'+P+'"]').show().addClass("animate__animated "+animateIn);$("#page_archive_work .row").fadeIn(1000,function(){$('#page_archive_work .column[data-project-type~="'+P+'"]').removeClass("animate__animated "+animateIn);E=P;F=false;P=P.capitalize();if(v){_paq.push(["trackEvent","Types","Work",P])}})})}}else{if(I==="postNavigation"){G();var O=Q.data("viewType");var N=Q.data("postType");var K=Q.data("postId");var M=Q.data("categoryId");var R=K||M;i(L,O,N,R)}}}});jQuery(document).on("click","#content_wrapper div .numbers_wrapper .numbers div",function(){var I=jQuery(this);var H=I.parent().parent().parent().attr("id");var G=I.data("slide");var J=jQuery("#"+H+" .highlight_slides > div:visible").data("slide");if(J!==G&&!q){q=true;j(H,J,G)}});jQuery(document).on("click","#content_wrapper div .highlight_slides div img.highlight",function(){var G=jQuery(this).parent();var J=G.parent().parent().attr("id");var L=G.data("slide");var I=G.parent().children().length;if(I>1&&!q){q=true;var K=G.next("div");var H;if(K.length===0){K=G.prevAll("div").last();H=K.data("slide")}else{H=K.data("slide")}j(J,L,H)}});var g,f,C,k,e;g=window.categoryId;jQuery(window).scroll(function(){k=jQuery(document).height()-jQuery(window).height();e=jQuery(window).scrollTop()+200;if(e>=k&&!C&&!n){if(jQuery("#page_category_"+g).is(":visible")){u();f=jQuery("#page_category_"+g+" > article").length;jQuery.ajax({type:"POST",url:x,data:{action:"getAjaxData",category:g,offset:f,token:window.nonce},success:function(G){if(G===""){C=true}else{jQuery("#page_category_"+g+":last-child").append(G)}},error:function(G){if(G.status===403){r("page_error_403",false,G.responseText)}},complete:function(){m()}})}else{if(jQuery("#page_blog").is(":visible")){u();f=jQuery("#page_blog > article").length;jQuery.ajax({type:"POST",url:x,data:{action:"getAjaxData",category:"",offset:f,token:window.nonce},success:function(G){if(G===""){C=true}else{jQuery("#page_blog:last-child").append(G)}},error:function(G){if(G.status===403){r("page_error_403",false,G.responseText)}},complete:function(){m()}})}}}})});